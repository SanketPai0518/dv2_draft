<!doctype html>
<html lang="en" class="no-js" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Internet Adoption & Prosperity — Interactive Atlas</title>

  <!-- Styles -->
  <link rel="stylesheet" href="index.css" />

  <!-- Libs (keep order) -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  <script src="https://cdn.jsdelivr.net/npm/d3-dsv@3"></script>
</head>
<body>

<!-- ===== Top navigation ===== -->
<header class="topbar">
  <div class="container wrap">
    <a class="brand" href="#top" aria-label="Internet Adoption home">
      <div class="logo" aria-hidden="true"></div>
      <strong>Internet Adoption & Prosperity</strong>
    </a>
    <nav aria-label="Primary">
      <ul>
        <li><a href="#summary">Summary</a></li>
        <li><a href="#maps">Maps</a></li>
        <li><a href="#prosperity">Prosperity</a></li>
        <li><a href="#bycontinent">By Continent</a></li>
        <li><a href="#density">Distribution</a></li>
        <li><a href="#sources">Sources</a></li>
      </ul>
    </nav>
    <!-- Theme toggle removed -->
  </div>
</header>

<!-- ===== Hero ===== -->
<section class="hero" id="top">
  <div class="container">
    <span class="chip">Interactive Atlas</span>
    <h1>How people get online — and why some still can’t</h1>
    <p class="sub">
      Explore how electricity access, affordability, and prosperity align with internet adoption.
      Built with <strong>Vega-Lite</strong>.
    </p>
    <div style="margin-top:12px; display:flex; gap:10px">
      <a class="btn primary" href="#summary">Start with the summary</a>
      <a class="btn" href="#maps">Jump to maps</a>
    </div>
  </div>
</section>

<!-- ===== Summary / Key takeaways (year-agnostic) ===== -->
<section id="summary" class="container section">
  <div class="card h takeaways">
    <section class="key-takeaways">
      <h2>Key takeaways</h2>
      <ul>
        <li><strong>Access is widespread but uneven.</strong> Many countries are above ~80–90% internet use, while a persistent group remains far lower — the digital divide hasn’t disappeared, it’s just moved.</li>
        <li><strong>Infrastructure outpaces connectivity in many places.</strong> The <em>Electricity – Internet</em> map shows electricity access typically exceeds internet use by tens of percentage points. That gap signals room to grow once affordability, coverage, and skills barriers are tackled.</li>
        <li><strong>Prosperity and connectivity rise together.</strong> Country points follow an S-shaped pattern: big gains in internet use as economies move from low to middle income, with diminishing returns at very high income levels.</li>
        <li><strong>Continents reflect those gradients.</strong> On average, Europe and Oceania sit highest on both GDP per capita and internet use, the Americas and parts of Asia are in the middle, and Africa trails — highlighting different starting points and policy challenges.</li>
        <li><strong>Most countries cluster high, but a long tail remains.</strong> The distribution curve is right-heavy (lots of high-adoption countries) with a tail of lower-adoption states that account for much of the remaining global gap.</li>
      </ul>
      <p class="tip">
        <em>Tip:</em> On the maps, darker blues mean higher values; on the diverging map, <em>blue</em> indicates electricity coverage exceeds internet use (positive gap) and <em>orange</em> indicates the reverse.
      </p>
    </section>
  </div>
</section>

<!-- ===== Main content (sidebar + charts) ===== -->
<div class="container grid" id="maps">
  <!-- Sidebar: guide + live top list -->
  <aside class="side">
    <div class="card h">
      <h3 style="margin-top:0">Guide</h3>
      <ol class="small" style="padding-left:18px; margin:8px 0 0">
        <li><strong>Maps</strong>: who’s online & where the infrastructure gap is (electricity – internet).</li>
        <li><strong>Prosperity</strong>: GDP per capita vs internet use (with trend).</li>
        <li><strong>By continent</strong>: country metrics averaged to continents.</li>
        <li><strong>Distribution</strong>: density of adoption levels by year.</li>
      </ol>
      <p class="small" style="margin-top:10px">Tip: hover for details. Use dropdowns to change years; try log scale.</p>
    </div>

    <div class="card h" style="margin-top:16px">
      <div style="display:flex; align-items:center; justify-content:space-between; gap:10px">
        <strong>Top internet adoption <span class="small">(latest %)</span></strong>
        <span class="chip" id="top10Year">—</span>
      </div>
      <div id="top10Table" class="small" style="margin-top:10px">Loading…</div>
    </div>
  </aside>

  <!-- Main charts -->
  <main>
    <!-- Map: Internet users 2021 -->
    <section class="section">
      <div class="section-title">
        <h2>Internet users (%), 2021</h2>
        <span class="small">Equal Earth projection</span>
      </div>
      <div class="viz">
        <div id="visMap2021" aria-label="Choropleth of internet users in 2021"></div>
        <div class="caption">Drag the legend slider to filter countries by minimum adoption.</div>
      </div>
    </section>

    <!-- Map: Electricity – Internet gap -->
    <section class="section">
      <div class="section-title">
        <h2>Where electricity outruns the internet (pp, latest available)</h2>
      </div>
      <div class="viz">
        <div id="visGap" aria-label="Gap between electricity access and internet use"></div>
        <div class="caption">Positive = electricity access exceeds internet use (room to grow). Negative = internet near/exceeds electricity access.</div>
      </div>
    </section>

    <!-- Prosperity vs Internet (country level) -->
    <section class="section" id="prosperity">
      <div class="section-title">
        <h2>Does prosperity track internet use?</h2>
        <div class="small">GDP per capita (US$) vs Internet users (%). Points are countries; curve is LOESS trend.</div>
      </div>
      <div class="viz">
        <div class="card header" style="padding:10px; margin-bottom:8px">
          <div class="controls">
            <label>Year:
              <select id="prosYear"></select>
            </label>
            <label>
              <input type="checkbox" id="prosLog" checked />
              Log GDP axis
            </label>
          </div>
        </div>
        <div id="visProsperity"></div>
        <div class="caption" id="prosMsg"></div>
      </div>
    </section>

    <!-- By Continent -->
    <section class="section" id="bycontinent">
      <div class="section-title">
        <h2>From online to prosperity — by continent</h2>
        <div class="small">Each dot is a continent’s <em>mean</em> Internet users (%) vs <em>mean</em> GDP per capita.</div>
      </div>
      <div class="viz">
        <div class="card header" style="padding:10px; margin-bottom:8px">
          <div class="controls">
            <label>Year:
              <select id="contYear"></select>
            </label>
            <label>
              <input type="checkbox" id="contLog" checked />
              Log GDP axis
            </label>
          </div>
        </div>
        <div id="visContinent"></div>
        <div class="caption" id="contMsg"></div>
      </div>
    </section>

    <!-- Density -->
    <section class="section" id="density">
      <div class="section-title">
        <h2>How is adoption distributed?</h2>
        <div class="small">Kernel density of country-level internet users (% of population)</div>
      </div>
      <div class="viz">
        <div class="card header" style="padding:10px; margin-bottom:8px">
          <div class="controls" id="denControls" style="display:flex">
            <label>Year:
              <select id="denYear"></select>
            </label>
          </div>
          <div class="small">Translucent area shows share of countries by adoption level.</div>
        </div>
        <div id="visDensity"></div>
        <div id="denMsg" class="caption"></div>
      </div>
    </section>

    <!-- Sources -->
    <section class="section" id="sources">
      <div class="section-title">
        <h2>Data & Assets</h2>
        <div class="small">Place these in <code>/data</code></div>
      </div>
      <div class="card h small">
        <strong>Local files used</strong>:
        <div style="margin-top:6px">
          <code>countries.geojson</code>,
          <code>internet_users_2021.csv</code>,
          <code>share-of-individuals-using-the-internet.csv</code>,
          <code>API_NY.GDP.PCAP.CD_DS2_en_csv_v2_24794.csv</code>,
          <code>data-only-mobile-broadband-basket_1760356423859.csv</code>,
          <code>API_EG.ELC.ACCS.ZS_DS2_en_csv_v2_568.csv</code>
        </div>
      </div>
    </section>
  </main>
</div>

<!-- ===== Footer ===== -->
<footer class="container" style="margin:24px 0 80px">
  <div class="small">Built with Vega-Lite.</div>
</footer>

<!-- App -->
<script src="index.js"></script>
</body>
</html>
